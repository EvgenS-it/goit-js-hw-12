{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const API = {\n  PIXABAY: {\n    PATH: 'https://pixabay.com/api/',\n    KEY: '44444020-42ceddb875011e5970bd122af',\n    PER_PAGE: 15,\n  },\n};\n\nexport const fetchImages = async (searchQuery, page = 1) => {\n  return await axios.get(API.PIXABAY.PATH, {\n    params: {\n      key: API.PIXABAY.KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: API.PIXABAY.PER_PAGE\n    }\n  });\n};","export const renderTemplate = (data) => {\n\n  return `\n    <a href=\"${data.largeImageURL}\" class=\"item\">\n      <img src=\"${data.webformatURL}\" alt=\"\" alt=\"${data.tags}\"/>\n      <div class=\"data\">\n        <p><b>Likes</b> <span>${data.likes}</span></p>\n        <p><b>Views</b> <span>${data.views}</span></p>\n        <p><b>Comments</b> <span>${data.comments}</span></p>\n        <p><b>Downloads</b> <span>${data.downloads}</span></p>\n      </div>\n    </a>\n  `;\n};","import { fetchImages } from './js/pixabay-api.js';\nimport { API } from './js/pixabay-api.js';\nimport { renderTemplate } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formEl = document.querySelector('form.form-search');\nconst galleryEl = document.querySelector('.gallery');\nconst moreImgsBtnEl = document.querySelector('.more-imgs-btn');\nconst inputSearchEl = document.querySelector('.field-input_search');\n\nconst lightbox = new SimpleLightbox('.gallery a', {});\nlet page = 1;\nlet pages = 1;\n\nfunction requestImages(searchQuery, isFirstLoad = true) {\n  if(isFirstLoad) {\n    page = 1;\n  }\n\n  fetchImages(searchQuery, page)\n    .then((response) => {\n      const { hits, totalHits } = response.data;\n\n      galleryEl.classList.remove('is-load');\n      const imagesHtml = [];\n\n      if (totalHits === 0) {\n        moreImgsBtnEl.classList.add('is-hidden');\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          color: 'red',\n        });\n        pages = 1;\n        formEl.reset();\n        return;\n      }\n\n      pages = Math.ceil(totalHits / API.PIXABAY.PER_PAGE);\n\n      if(pages < page) {\n        moreImgsBtnEl.classList.add('is-hidden');\n        iziToast.error({\n          message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n          position: 'topRight',\n          color: 'red',\n        });\n\n        return;\n      }\n\n      page += 1;\n\n      hits.forEach((image) => {\n        imagesHtml.push(renderTemplate(image));\n      });\n\n      if(isFirstLoad) {\n        galleryEl.innerHTML = imagesHtml.join('');\n      } else {\n        galleryEl.insertAdjacentHTML('beforeend', imagesHtml.join(''));\n\n        const itemGalleryHeight = galleryEl.querySelector('.item');\n\n        window.scrollBy({\n          top: itemGalleryHeight.getBoundingClientRect().height * 2,\n          behavior: 'smooth',\n        });\n      }\n\n      if(pages > 1) {\n        moreImgsBtnEl.classList.remove('is-hidden');\n      }\n\n      if(page > pages) {\n        moreImgsBtnEl.classList.add('is-hidden');\n      }\n\n      lightbox.refresh();\n    })\n    .catch((error) => {\n      console.log(error);\n      galleryEl.classList.remove('is-load');\n      iziToast.error({\n        message: `Sorry, something went wrong! ${error.message}`,\n        position: 'topRight',\n        color: 'red',\n      });\n    });\n}\n\nif (formEl) {\n  formEl.addEventListener('submit', (event) => {\n    event.preventDefault();\n    moreImgsBtnEl.classList.add('is-hidden');\n\n    const inputSearchValue = inputSearchEl.value;\n\n    if (!inputSearchValue) {\n      iziToast.error({\n        message: 'Please enter a search term',\n        position: 'topRight',\n        color: 'red',\n      });\n    } else {\n      galleryEl.innerHTML = '';\n      galleryEl.classList.add('is-load');\n\n      requestImages(inputSearchValue);\n    }\n  });\n}\n\nif(moreImgsBtnEl) {\n  moreImgsBtnEl.addEventListener('click', () => {\n    const inputSearchValue = inputSearchEl.value;\n    requestImages(inputSearchValue, false);\n  });\n}"],"names":["API","fetchImages","searchQuery","page","axios","renderTemplate","data","formEl","galleryEl","moreImgsBtnEl","inputSearchEl","lightbox","SimpleLightbox","pages","requestImages","isFirstLoad","response","hits","totalHits","imagesHtml","iziToast","image","itemGalleryHeight","error","event","inputSearchValue"],"mappings":"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"}